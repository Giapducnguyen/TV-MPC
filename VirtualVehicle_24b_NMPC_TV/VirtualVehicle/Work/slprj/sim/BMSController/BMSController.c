#include "BMSController.h"
#include "rtwtypes.h"
#include "BMSController_private.h"
#include <string.h>
#include "BMSController_capi.h"
#include "BMSBalancingLogic.h"
#include "BMSOut.h"
#include "BMSCurrPowerLimCalc.h"
#include "BMSSOCEstimation.h"
#include "BMSStateMachine.h"
static RegMdlInfo rtMdlInfo_BMSController [ 48 ] = { { "prqjzwjjc0p" ,
MDL_INFO_NAME_MDLREF_DWORK , 0 , - 1 , ( void * ) "BMSController" } , {
"acitudgwjt" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * )
"BMSController" } , { "poeycoiqx2" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , -
1 , ( void * ) "BMSController" } , { "fpo3onxf5u" ,
MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * ) "BMSController" } , {
"ok3fv4t15v" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * )
"BMSController" } , { "jrticzz4ue" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , -
1 , ( void * ) "BMSController" } , { "e2h3i2esib" ,
MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * ) "BMSController" } , {
"gv5ropfa2y" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * )
"BMSController" } , { "owyh0ax5rb" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , -
1 , ( void * ) "BMSController" } , { "ffclwn2k3b" ,
MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * ) "BMSController" } , {
"e02yj4yvwu" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * )
"BMSController" } , { "gjtwacvis2" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , -
1 , ( void * ) "BMSController" } , { "g0d32wfvf1" ,
MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * ) "BMSController" } , {
"l5yy0qtgsj" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * )
"BMSController" } , { "k1rkqqlwx4" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , -
1 , ( void * ) "BMSController" } , { "g10dj1kimi" ,
MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * ) "BMSController" } , {
"dolsr1ry0j" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * )
"BMSController" } , { "dhe0j1g5mv" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , -
1 , ( void * ) "BMSController" } , { "n3ldsg2m4a" ,
MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * ) "BMSController" } , {
"p2t1vykwji" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * )
"BMSController" } , { "lftbpoqxym" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , -
1 , ( void * ) "BMSController" } , { "fron4u4vty" ,
MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * ) "BMSController" } , {
"ah533pbmux" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * )
"BMSController" } , { "BMSController" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0
, 0 , ( NULL ) } , { "el1bl3dvlu" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , -
1 , ( void * ) "BMSController" } , { "dkgtpceyogp" ,
MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * ) "BMSController" } , {
"i4zyr2rvdz" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , - 1 , ( void * )
"BMSController" } , { "jhg5ifokiz" , MDL_INFO_ID_GLOBAL_RTW_CONSTRUCT , 0 , -
1 , ( void * ) "BMSController" } , { "struct_beekyrb3065f5ZXL7GuueB" ,
MDL_INFO_ID_DATA_TYPE , 0 , - 1 , ( NULL ) } , { "hmzlgbhyjam" ,
MDL_INFO_ID_DATA_TYPE , 0 , - 1 , ( NULL ) } , { "pe5hyd5e5ea" ,
MDL_INFO_ID_DATA_TYPE , 0 , - 1 , ( NULL ) } , { "ozx2hltu2vi" ,
MDL_INFO_ID_DATA_TYPE , 0 , - 1 , ( NULL ) } , { "nxoas2gjfbm" ,
MDL_INFO_ID_DATA_TYPE , 0 , - 1 , ( NULL ) } , { "pcu03dvoe3p" ,
MDL_INFO_ID_DATA_TYPE , 0 , - 1 , ( NULL ) } , {
"mr_BMSController_GetSimStateDisallowedBlocks" , MDL_INFO_ID_MODEL_FCN_NAME ,
0 , - 1 , ( void * ) "BMSController" } , {
"mr_BMSController_extractBitFieldFromCellArrayWithOffset" ,
MDL_INFO_ID_MODEL_FCN_NAME , 0 , - 1 , ( void * ) "BMSController" } , {
"mr_BMSController_cacheBitFieldToCellArrayWithOffset" ,
MDL_INFO_ID_MODEL_FCN_NAME , 0 , - 1 , ( void * ) "BMSController" } , {
"mr_BMSController_restoreDataFromMxArrayWithOffset" ,
MDL_INFO_ID_MODEL_FCN_NAME , 0 , - 1 , ( void * ) "BMSController" } , {
"mr_BMSController_cacheDataToMxArrayWithOffset" , MDL_INFO_ID_MODEL_FCN_NAME
, 0 , - 1 , ( void * ) "BMSController" } , {
"mr_BMSController_extractBitFieldFromMxArray" , MDL_INFO_ID_MODEL_FCN_NAME ,
0 , - 1 , ( void * ) "BMSController" } , {
"mr_BMSController_cacheBitFieldToMxArray" , MDL_INFO_ID_MODEL_FCN_NAME , 0 ,
- 1 , ( void * ) "BMSController" } , {
"mr_BMSController_restoreDataFromMxArray" , MDL_INFO_ID_MODEL_FCN_NAME , 0 ,
- 1 , ( void * ) "BMSController" } , { "mr_BMSController_cacheDataAsMxArray"
, MDL_INFO_ID_MODEL_FCN_NAME , 0 , - 1 , ( void * ) "BMSController" } , {
"mr_BMSController_RegisterSimStateChecksum" , MDL_INFO_ID_MODEL_FCN_NAME , 0
, - 1 , ( void * ) "BMSController" } , { "mr_BMSController_SetDWork" ,
MDL_INFO_ID_MODEL_FCN_NAME , 0 , - 1 , ( void * ) "BMSController" } , {
"mr_BMSController_GetDWork" , MDL_INFO_ID_MODEL_FCN_NAME , 0 , - 1 , ( void *
) "BMSController" } , { "BMSController.h" , MDL_INFO_MODEL_FILENAME , 0 , - 1
, ( NULL ) } , { "BMSController.c" , MDL_INFO_MODEL_FILENAME , 0 , - 1 , ( void
* ) "BMSController" } } ; dkgtpceyogp dkgtpceyog = { { 3.6F , 3.6F , 3.6F ,
3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F ,
3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F ,
3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F ,
3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F ,
3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F ,
3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F ,
3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F ,
3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F , 3.6F ,
3.6F , 3.6F , 3.6F , 3.6F , 3.6F } , { 25.0F , 25.0F , 25.0F , 25.0F , 25.0F
, 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F ,
25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F
, 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F ,
25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F
, 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F ,
25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F
, 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F ,
25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F
, 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F ,
25.0F , 25.0F , 25.0F , 25.0F , 25.0F , 25.0F } , 2.0F , 345.6F , 0.0F , 0.0F
, 0.0F } ; void p2t1vykwji ( l5yy0qtgsj * localB , g0d32wfvf1 * localDW ) {
memcpy ( & localDW -> dz4c4vv4e1 [ 0 ] , & dkgtpceyog . P_3 [ 0 ] , 96U *
sizeof ( real32_T ) ) ; memcpy ( & localDW -> phucyyn21j [ 0 ] , & dkgtpceyog
. P_4 [ 0 ] , 96U * sizeof ( real32_T ) ) ; localDW -> ku0cdxjs3l =
dkgtpceyog . P_6 ; localDW -> iqzga4pj3l = dkgtpceyog . P_7 ; localDW ->
hdl0hgqmi0 = dkgtpceyog . P_8 ; localDW -> hmm5af0r2l = dkgtpceyog . P_9 ;
okbayvkvs0 ( & localB -> cwnu4cp2yu [ 0 ] , & ( localDW -> lvxrgwkk43 . rtdw
) ) ; bbzyccyfe5 ( & ( localDW -> j2vfortgzd . rtdw ) ) ; c4qsdumjq2 ( &
localB -> ncq33t5kyy , & localB -> dsu5t5n3ng , & localB -> ifa0wcc4ko , &
localB -> ohkage5rqe , & localB -> jqp3ld4hvv , & localB -> epo3j5m4yl , &
localB -> fichzdgpsq , & localB -> kzwhsorkcz , & localB -> l3kysasume , & ( localDW -> izgwu1no1t . rtdw ) ) ; } void n3ldsg2m4a ( l5yy0qtgsj * localB , g0d32wfvf1 * localDW ) { memcpy ( & localDW -> dz4c4vv4e1 [ 0 ] , & dkgtpceyog . P_3 [ 0 ] , 96U * sizeof ( real32_T ) ) ; memcpy ( & localDW -> phucyyn21j [ 0 ] , & dkgtpceyog . P_4 [ 0 ] , 96U * sizeof ( real32_T ) ) ; localDW -> ku0cdxjs3l = dkgtpceyog . P_6 ; localDW -> iqzga4pj3l = dkgtpceyog . P_7 ; localDW -> hdl0hgqmi0 = dkgtpceyog . P_8 ; localDW -> hmm5af0r2l = dkgtpceyog . P_9 ; b24n3fhfdi ( & localB -> ncq33t5kyy , & localB -> dsu5t5n3ng , & localB -> ifa0wcc4ko , & localB -> ohkage5rqe , & localB -> jqp3ld4hvv , & localB -> epo3j5m4yl , & localB -> fichzdgpsq , & localB -> kzwhsorkcz , & localB -> l3kysasume , & ( localDW -> izgwu1no1t . rtdw ) ) ; hue3c0yakn ( & ( localDW -> j2vfortgzd . rtdw ) ) ; l0kmnlkf5y ( & localB -> cwnu4cp2yu [ 0 ] , & ( localDW -> lvxrgwkk43 . rtdw ) ) ; } void BMSControllerTID0 ( jhg5ifokiz * const lynqqvz3ra , boolean_T * e4kvz4supm , real32_T * a3l2j3y4lx , real32_T * niiizijeve , real32_T * br2su3c3jv , real32_T * oc2qyedj4g , real32_T * aid0h22051 , boolean_T * dwoz1cruz0 , boolean_T * axxqpxhh12 , boolean_T * brsw5m0oia , boolean_T * pcvnwgre5k , boolean_T * llhvqx5te5 , boolean_T * lyrkpolxu5 , boolean_T jztsnikid1 [ 96 ] , l5yy0qtgsj * localB , g0d32wfvf1 * localDW ) { int_T tid = 0 ; real32_T a0k22kf4ib ; memcpy ( & localB -> fm55o01te2 [ 0 ] , & localDW -> dz4c4vv4e1 [ 0 ] , 96U * sizeof ( real32_T ) ) ; memcpy ( & localB -> hukeshrxti [ 0 ] , & localDW -> phucyyn21j [ 0 ] , 96U * sizeof ( real32_T ) ) ; BMSCurrPowerLimCalc ( & localB -> fm55o01te2 [ 0 ] , & localB -> hukeshrxti [ 0 ] , & localB -> buxxf5bscd , & localB -> chxcucuq31 , & localB -> py3rn4eqr1 , & localB -> mmw4avf5xh , & localB -> osroavgql2 , & localB -> cilw3vwez2 ) ; localB -> i1ppqdbs1b = localDW -> ku0cdxjs3l ; localB -> ldj1uiqfcy = localDW -> iqzga4pj3l ; localB -> osftp5zobs = localDW -> hdl0hgqmi0 ; localB -> fx2mrcmllw = localDW -> hmm5af0r2l ; BMSStateMachine ( & dkgtpceyog . P_5 , & localB -> fm55o01te2 [ 0 ] , & localB -> i1ppqdbs1b , & localB -> ldj1uiqfcy , & localB -> osftp5zobs , & localB -> fx2mrcmllw , & localB -> buxxf5bscd , & localB -> chxcucuq31 , & localB -> py3rn4eqr1 , & localB -> mmw4avf5xh , & localB -> osroavgql2 , & localB -> cilw3vwez2 , & localB -> ncq33t5kyy , & localB -> dsu5t5n3ng , & localB -> ifa0wcc4ko , & localB -> ohkage5rqe , & localB -> jqp3ld4hvv , & localB -> epo3j5m4yl , & localB -> fichzdgpsq , & localB -> kzwhsorkcz , & localB -> l3kysasume , & ( localDW -> izgwu1no1t . rtdw ) ) ; BMSSOCEstimation ( & localB -> ldj1uiqfcy , & a0k22kf4ib , & ( localDW -> j2vfortgzd . rtb ) , & ( localDW -> j2vfortgzd . rtdw ) ) ; BMSOutTID0 ( & localB -> buxxf5bscd , & localB -> chxcucuq31 , & localB -> ncq33t5kyy , & localB -> dsu5t5n3ng , & localB -> ifa0wcc4ko , & localB -> ohkage5rqe , & localB -> jqp3ld4hvv , & localB -> epo3j5m4yl , & localB -> fichzdgpsq , & localB -> kzwhsorkcz , & localB -> l3kysasume , & a0k22kf4ib , & localB -> cwnu4cp2yu [ 0 ] , br2su3c3jv , oc2qyedj4g , aid0h22051 , dwoz1cruz0 , axxqpxhh12 , brsw5m0oia , pcvnwgre5k , llhvqx5te5 , lyrkpolxu5 , & jztsnikid1 [ 0 ] , e4kvz4supm , a3l2j3y4lx , niiizijeve ) ; if ( rtmIsSpecialSampleHit ( lynqqvz3ra , 1 , 0 , tid ) ) { memcpy ( & localDW -> m3mj3jyjio [ 0 ] , & localB -> fm55o01te2 [ 0 ] , 96U * sizeof ( real32_T ) ) ; localDW -> kxvz5gfvp4 = localB -> l3kysasume ; localDW -> lizezojaqr = localB -> mmw4avf5xh ; localDW -> ldt520oxg4 = localB -> py3rn4eqr1 ; } ( void ) ( tid ) ; } void BMSControllerTID1 ( l5yy0qtgsj * localB , g0d32wfvf1 * localDW ) { int_T tid = 1 ; BMSBalancingLogic ( & localDW -> kxvz5gfvp4 , & localDW -> m3mj3jyjio [ 0 ] , & localDW -> lizezojaqr , & localDW -> ldt520oxg4 , & localB -> cwnu4cp2yu [ 0 ] , & ( localDW -> lvxrgwkk43 . rtdw ) ) ; BMSOutTID1 ( ) ; ( void ) ( tid ) ; } void dhe0j1g5mvTID0 ( const real32_T adxekd5tio [ 96 ] , const real32_T j3wvkhbfe4 [ 96 ] , const real32_T * alolnomync , const real32_T * gr0s1ny5og , const real32_T * cne0zycowu , const real32_T * lvjqgkdjmc , g0d32wfvf1 * localDW ) { memcpy ( & localDW -> dz4c4vv4e1 [ 0 ] , & adxekd5tio [ 0 ] , 96U * sizeof ( real32_T ) ) ; memcpy ( & localDW -> phucyyn21j [ 0 ] , & j3wvkhbfe4 [ 0 ] , 96U * sizeof ( real32_T ) ) ; localDW -> ku0cdxjs3l = * alolnomync ; localDW -> iqzga4pj3l = * lvjqgkdjmc ; localDW -> hdl0hgqmi0 = * gr0s1ny5og ; localDW -> hmm5af0r2l = * cne0zycowu ; ioolb10wj0 ( & ( localDW -> j2vfortgzd . rtb ) , & ( localDW -> j2vfortgzd . rtdw ) ) ; } void dhe0j1g5mvTID1 ( void ) { } void g10dj1kimi ( g0d32wfvf1 * localDW , jhg5ifokiz * const lynqqvz3ra ) { du2aze3q0u ( & ( localDW -> ffhenqhiqq . rtm ) ) ; jqgqne15uw ( & ( localDW -> izgwu1no1t . rtm ) ) ; kcczw4j51s ( & ( localDW -> j2vfortgzd . rtm ) ) ; jhgahwtvq0 ( & ( localDW -> banpsm2jq3 . rtm ) ) ; jozn1uvmvd ( & ( localDW -> lvxrgwkk43 . rtm ) ) ; if ( ! slIsRapidAcceleratorSimulating ( ) ) { slmrRunPluginEvent ( lynqqvz3ra -> _mdlRefSfcnS , "BMSController" , "SIMSTATUS_TERMINATING_MODELREF_ACCEL_EVENT" ) ; } } void lftbpoqxym ( SimStruct * _mdlRefSfcnS , int_T mdlref_TID0 , int_T mdlref_TID1 , jhg5ifokiz * const lynqqvz3ra , l5yy0qtgsj * localB , g0d32wfvf1 * localDW , void * sysRanPtr , int contextTid , rtwCAPI_ModelMappingInfo * rt_ParentMMI , const char_T * rt_ChildPath , int_T rt_ChildMMIIdx , int_T rt_CSTATEIdx ) { ( void ) memset ( ( void * ) lynqqvz3ra , 0 , sizeof ( jhg5ifokiz ) ) ; lynqqvz3ra -> Timing . mdlref_GlobalTID [ 0 ] = mdlref_TID0 ; lynqqvz3ra -> Timing . mdlref_GlobalTID [ 1 ] = mdlref_TID1 ; lynqqvz3ra -> _mdlRefSfcnS = ( _mdlRefSfcnS ) ; if ( ! slIsRapidAcceleratorSimulating ( ) ) { slmrRunPluginEvent ( lynqqvz3ra -> _mdlRefSfcnS , "BMSController" , "START_OF_SIM_MODEL_MODELREF_ACCEL_EVENT" ) ; } ( void ) memset ( ( ( void * ) localB ) , 0 , sizeof ( l5yy0qtgsj ) ) ; { int32_T i ; for ( i = 0 ; i < 96 ; i ++ ) { localB -> fm55o01te2 [ i ] = 0.0F ; } for ( i = 0 ; i < 96 ; i ++ ) { localB -> hukeshrxti [ i ] = 0.0F ; } localB -> buxxf5bscd = 0.0F ; localB -> chxcucuq31 = 0.0F ; localB -> py3rn4eqr1 = 0.0F ; localB -> mmw4avf5xh = 0.0F ; localB -> osroavgql2 = 0.0F ; localB -> cilw3vwez2 = 0.0F ; localB -> i1ppqdbs1b = 0.0F ; localB -> ldj1uiqfcy = 0.0F ; localB -> osftp5zobs = 0.0F ; localB -> fx2mrcmllw = 0.0F ; localB -> ncq33t5kyy = 0.0F ; localB -> l3kysasume = 0.0F ; } ( void ) memset ( ( void * ) localDW , 0 , sizeof ( g0d32wfvf1 ) ) ; { int32_T i ; for ( i = 0 ; i < 96 ; i ++ ) { localDW -> dz4c4vv4e1 [ i ] = 0.0F ; } } { int32_T i ; for ( i = 0 ; i < 96 ; i ++ ) { localDW -> phucyyn21j [ i ] = 0.0F ; } } localDW -> ku0cdxjs3l = 0.0F ; localDW -> iqzga4pj3l = 0.0F ; localDW -> hdl0hgqmi0 = 0.0F ; localDW -> hmm5af0r2l = 0.0F ; { int32_T i ; for ( i = 0 ; i < 96 ; i ++ ) { localDW -> m3mj3jyjio [ i ] = 0.0F ; } } localDW -> kxvz5gfvp4 = 0.0F ; localDW -> lizezojaqr = 0.0F ; localDW -> ldt520oxg4 = 0.0F ; BMSController_InitializeDataMapInfo ( lynqqvz3ra , localDW , sysRanPtr , contextTid ) ; bjd0wkxsam ( _mdlRefSfcnS , mdlref_TID1 , & ( localDW -> lvxrgwkk43 . rtm ) , & ( localDW -> lvxrgwkk43 . rtdw ) , lynqqvz3ra -> DataMapInfo . systemRan [ 0 ] , lynqqvz3ra -> DataMapInfo . systemTid [ 0 ] , & ( lynqqvz3ra -> DataMapInfo . mmi ) , "BMSController/Balancing Logic" , 0 , - 1 ) ; gzneizzges ( _mdlRefSfcnS , mdlref_TID0 , mdlref_TID1 , & ( localDW -> banpsm2jq3 . rtm ) , lynqqvz3ra -> DataMapInfo . systemRan [ 0 ] , lynqqvz3ra -> DataMapInfo . systemTid [ 0 ] , & ( lynqqvz3ra -> DataMapInfo . mmi ) , "BMSController/BMS Out" , 1 , - 1 ) ; mmipgl5oaa ( _mdlRefSfcnS , mdlref_TID0 , & ( localDW -> ffhenqhiqq . rtm ) , lynqqvz3ra -> DataMapInfo . systemRan [ 0 ] , lynqqvz3ra -> DataMapInfo . systemTid [ 0 ] , & ( lynqqvz3ra -> DataMapInfo . mmi ) , "BMSController/Current Power Limits Calc" , 2 , - 1 ) ; dllaarzzct ( _mdlRefSfcnS , mdlref_TID0 , & ( localDW -> j2vfortgzd . rtm ) , & ( localDW -> j2vfortgzd . rtb ) , & ( localDW -> j2vfortgzd . rtdw ) , lynqqvz3ra -> DataMapInfo . systemRan [ 0 ] , lynqqvz3ra -> DataMapInfo . systemTid [ 0 ] , & ( lynqqvz3ra -> DataMapInfo . mmi ) , "BMSController/SOC Estimation" , 3 , - 1 ) ; n2eo0cythm ( _mdlRefSfcnS , mdlref_TID0 , & ( localDW -> izgwu1no1t . rtm ) , & ( localDW -> izgwu1no1t . rtdw ) , lynqqvz3ra -> DataMapInfo . systemRan [ 0 ] , lynqqvz3ra -> DataMapInfo . systemTid [ 0 ] , & ( lynqqvz3ra -> DataMapInfo . mmi ) , "BMSController/State Machine" , 4 , - 1 ) ; if ( ( rt_ParentMMI != ( NULL ) ) && ( rt_ChildPath != ( NULL ) ) ) { rtwCAPI_SetChildMMI ( * rt_ParentMMI , rt_ChildMMIIdx , & ( lynqqvz3ra -> DataMapInfo . mmi ) ) ; rtwCAPI_SetPath ( lynqqvz3ra -> DataMapInfo . mmi , rt_ChildPath ) ; rtwCAPI_MMISetContStateStartIndex ( lynqqvz3ra -> DataMapInfo . mmi , rt_CSTATEIdx ) ; } } void mr_BMSController_MdlInfoRegFcn ( SimStruct * mdlRefSfcnS , char_T * modelName , int_T * retVal ) { * retVal = 0 ; { boolean_T regSubmodelsMdlinfo = false ; ssGetRegSubmodelsMdlinfo ( mdlRefSfcnS , & regSubmodelsMdlinfo ) ; if ( regSubmodelsMdlinfo ) { mr_BMSBalancingLogic_MdlInfoRegFcn ( mdlRefSfcnS , "BMSBalancingLogic" , retVal ) ; if ( * retVal == 0 ) return ; * retVal = 0 ; mr_BMSOut_MdlInfoRegFcn ( mdlRefSfcnS , "BMSOut" , retVal ) ; if ( * retVal == 0 ) return ; * retVal = 0 ; mr_BMSCurrPowerLimCalc_MdlInfoRegFcn ( mdlRefSfcnS , "BMSCurrPowerLimCalc" , retVal ) ; if ( * retVal == 0 ) return ; * retVal = 0 ; mr_BMSSOCEstimation_MdlInfoRegFcn ( mdlRefSfcnS , "BMSSOCEstimation" , retVal ) ; if ( * retVal == 0 ) return ; * retVal = 0 ; mr_BMSStateMachine_MdlInfoRegFcn ( mdlRefSfcnS , "BMSStateMachine" , retVal ) ; if ( * retVal == 0 ) return ; * retVal = 0 ; } } * retVal = 0 ; ssRegModelRefMdlInfo ( mdlRefSfcnS , modelName , rtMdlInfo_BMSController , 48 ) ; * retVal = 1 ; } static void mr_BMSController_cacheDataAsMxArray ( mxArray * destArray , mwIndex i , int j , const void * srcData , size_t numBytes ) ; static void mr_BMSController_cacheDataAsMxArray ( mxArray * destArray , mwIndex i , int j , const void * srcData , size_t numBytes ) { mxArray * newArray = mxCreateUninitNumericMatrix ( ( size_t ) 1 , numBytes , mxUINT8_CLASS , mxREAL ) ; memcpy ( ( uint8_T * ) mxGetData ( newArray ) , ( const uint8_T * ) srcData , numBytes ) ; mxSetFieldByNumber ( destArray , i , j , newArray ) ; } static void mr_BMSController_restoreDataFromMxArray ( void * destData , const mxArray * srcArray , mwIndex i , int j , size_t numBytes ) ; static void mr_BMSController_restoreDataFromMxArray ( void * destData , const mxArray * srcArray , mwIndex i , int j , size_t numBytes ) { memcpy ( ( uint8_T * ) destData , ( const uint8_T * ) mxGetData ( mxGetFieldByNumber ( srcArray , i , j ) ) , numBytes ) ; } static void mr_BMSController_cacheBitFieldToMxArray ( mxArray * destArray , mwIndex i , int j , uint_T bitVal ) ; static void mr_BMSController_cacheBitFieldToMxArray ( mxArray * destArray , mwIndex i , int j , uint_T bitVal ) { mxSetFieldByNumber ( destArray , i , j , mxCreateDoubleScalar ( ( real_T ) bitVal ) ) ; } static uint_T mr_BMSController_extractBitFieldFromMxArray ( const mxArray * srcArray , mwIndex i , int j , uint_T numBits ) ; static uint_T mr_BMSController_extractBitFieldFromMxArray ( const mxArray * srcArray , mwIndex i , int j , uint_T numBits ) { const uint_T varVal = ( uint_T ) mxGetScalar ( mxGetFieldByNumber ( srcArray , i , j ) ) ; return varVal & ( ( 1u << numBits ) - 1u ) ; } static void mr_BMSController_cacheDataToMxArrayWithOffset ( mxArray * destArray , mwIndex i , int j , mwIndex offset , const void * srcData , size_t numBytes ) ; static void mr_BMSController_cacheDataToMxArrayWithOffset ( mxArray * destArray , mwIndex i , int j , mwIndex offset , const void * srcData , size_t numBytes ) { uint8_T * varData = ( uint8_T * ) mxGetData ( mxGetFieldByNumber ( destArray , i , j ) ) ; memcpy ( ( uint8_T * ) & varData [ offset * numBytes ] , ( const uint8_T * ) srcData , numBytes ) ; } static void mr_BMSController_restoreDataFromMxArrayWithOffset ( void * destData , const mxArray * srcArray , mwIndex i , int j , mwIndex offset , size_t numBytes ) ; static void mr_BMSController_restoreDataFromMxArrayWithOffset ( void * destData , const mxArray * srcArray , mwIndex i , int j , mwIndex offset , size_t numBytes ) { const uint8_T * varData = ( const uint8_T * ) mxGetData ( mxGetFieldByNumber ( srcArray , i , j ) ) ; memcpy ( ( uint8_T * ) destData , ( const uint8_T * ) & varData [ offset * numBytes ] , numBytes ) ; } static void mr_BMSController_cacheBitFieldToCellArrayWithOffset ( mxArray * destArray , mwIndex i , int j , mwIndex offset , uint_T fieldVal ) ; static void mr_BMSController_cacheBitFieldToCellArrayWithOffset ( mxArray * destArray , mwIndex i , int j , mwIndex offset , uint_T fieldVal ) { mxSetCell ( mxGetFieldByNumber ( destArray , i , j ) , offset , mxCreateDoubleScalar ( ( real_T ) fieldVal ) ) ; } static uint_T mr_BMSController_extractBitFieldFromCellArrayWithOffset ( const mxArray * srcArray , mwIndex i , int j , mwIndex offset , uint_T numBits ) ; static uint_T mr_BMSController_extractBitFieldFromCellArrayWithOffset ( const mxArray * srcArray , mwIndex i , int j , mwIndex offset , uint_T numBits ) { const uint_T fieldVal = ( uint_T ) mxGetScalar ( mxGetCell ( mxGetFieldByNumber ( srcArray , i , j ) , offset ) ) ; return fieldVal & ( ( 1u << numBits ) - 1u ) ; } mxArray * mr_BMSController_GetDWork ( const prqjzwjjc0p * mdlrefDW ) { static const char_T * ssDWFieldNames [ 3 ] = { "rtb" , "rtdw" , "NULL->rtzce" , } ; mxArray * ssDW = mxCreateStructMatrix ( 1 , 1 , 3 , ssDWFieldNames ) ; mr_BMSController_cacheDataAsMxArray ( ssDW , 0 , 0 , ( const void * ) & ( mdlrefDW -> rtb ) , sizeof ( mdlrefDW -> rtb ) ) ; { static const char_T * rtdwDataFieldNames [ 15 ] = { "mdlrefDW->rtdw.ffhenqhiqq" , "mdlrefDW->rtdw.izgwu1no1t" , "mdlrefDW->rtdw.j2vfortgzd" , "mdlrefDW->rtdw.banpsm2jq3" , "mdlrefDW->rtdw.lvxrgwkk43" , "mdlrefDW->rtdw.dz4c4vv4e1" , "mdlrefDW->rtdw.phucyyn21j" , "mdlrefDW->rtdw.ku0cdxjs3l" , "mdlrefDW->rtdw.iqzga4pj3l" , "mdlrefDW->rtdw.hdl0hgqmi0" , "mdlrefDW->rtdw.hmm5af0r2l" , "mdlrefDW->rtdw.m3mj3jyjio" , "mdlrefDW->rtdw.kxvz5gfvp4" , "mdlrefDW->rtdw.lizezojaqr" , "mdlrefDW->rtdw.ldt520oxg4" , } ; mxArray * rtdwData = mxCreateStructMatrix ( 1 , 1 , 15 , rtdwDataFieldNames ) ; { mxArray * varData = mr_BMSCurrPowerLimCalc_GetDWork ( & ( mdlrefDW -> rtdw . ffhenqhiqq ) ) ; mxSetFieldByNumber ( rtdwData , 0 , 0 , varData ) ; } { mxArray * varData = mr_BMSStateMachine_GetDWork ( & ( mdlrefDW -> rtdw . izgwu1no1t ) ) ; mxSetFieldByNumber ( rtdwData , 0 , 1 , varData ) ; } { mxArray * varData = mr_BMSSOCEstimation_GetDWork ( & ( mdlrefDW -> rtdw . j2vfortgzd ) ) ; mxSetFieldByNumber ( rtdwData , 0 , 2 , varData ) ; } { mxArray * varData = mr_BMSOut_GetDWork ( & ( mdlrefDW -> rtdw . banpsm2jq3 ) ) ; mxSetFieldByNumber ( rtdwData , 0 , 3 , varData ) ; } { mxArray * varData = mr_BMSBalancingLogic_GetDWork ( & ( mdlrefDW -> rtdw . lvxrgwkk43 ) ) ; mxSetFieldByNumber ( rtdwData , 0 , 4 , varData ) ; } mr_BMSController_cacheDataAsMxArray ( rtdwData , 0 , 5 , ( const void * ) & ( mdlrefDW -> rtdw . dz4c4vv4e1 ) , sizeof ( mdlrefDW -> rtdw . dz4c4vv4e1 ) ) ; mr_BMSController_cacheDataAsMxArray ( rtdwData , 0 , 6 , ( const void * ) & ( mdlrefDW -> rtdw . phucyyn21j ) , sizeof ( mdlrefDW -> rtdw . phucyyn21j ) ) ; mr_BMSController_cacheDataAsMxArray ( rtdwData , 0 , 7 , ( const void * ) & ( mdlrefDW -> rtdw . ku0cdxjs3l ) , sizeof ( mdlrefDW -> rtdw . ku0cdxjs3l ) ) ; mr_BMSController_cacheDataAsMxArray ( rtdwData , 0 , 8 , ( const void * ) & ( mdlrefDW -> rtdw . iqzga4pj3l ) , sizeof ( mdlrefDW -> rtdw . iqzga4pj3l ) ) ; mr_BMSController_cacheDataAsMxArray ( rtdwData , 0 , 9 , ( const void * ) & ( mdlrefDW -> rtdw . hdl0hgqmi0 ) , sizeof ( mdlrefDW -> rtdw . hdl0hgqmi0 ) ) ; mr_BMSController_cacheDataAsMxArray ( rtdwData , 0 , 10 , ( const void * ) & ( mdlrefDW -> rtdw . hmm5af0r2l ) , sizeof ( mdlrefDW -> rtdw . hmm5af0r2l ) ) ; mr_BMSController_cacheDataAsMxArray ( rtdwData , 0 , 11 , ( const void * ) & ( mdlrefDW -> rtdw . m3mj3jyjio ) , sizeof ( mdlrefDW -> rtdw . m3mj3jyjio ) ) ; mr_BMSController_cacheDataAsMxArray ( rtdwData , 0 , 12 , ( const void * ) & ( mdlrefDW -> rtdw . kxvz5gfvp4 ) , sizeof ( mdlrefDW -> rtdw . kxvz5gfvp4 ) ) ; mr_BMSController_cacheDataAsMxArray ( rtdwData , 0 , 13 , ( const void * ) & ( mdlrefDW -> rtdw . lizezojaqr ) , sizeof ( mdlrefDW -> rtdw . lizezojaqr ) ) ; mr_BMSController_cacheDataAsMxArray ( rtdwData , 0 , 14 , ( const void * ) & ( mdlrefDW -> rtdw . ldt520oxg4 ) , sizeof ( mdlrefDW -> rtdw . ldt520oxg4 ) ) ; mxSetFieldByNumber ( ssDW , 0 , 1 , rtdwData ) ; } ( void ) mdlrefDW ; return ssDW ; } void mr_BMSController_SetDWork ( prqjzwjjc0p * mdlrefDW , const mxArray * ssDW ) { ( void ) ssDW ; ( void ) mdlrefDW ; mr_BMSController_restoreDataFromMxArray ( ( void * ) & ( mdlrefDW -> rtb ) , ssDW , 0 , 0 , sizeof ( mdlrefDW -> rtb ) ) ; { const mxArray * rtdwData = mxGetFieldByNumber ( ssDW , 0 , 1 ) ; mr_BMSCurrPowerLimCalc_SetDWork ( & ( mdlrefDW -> rtdw . ffhenqhiqq ) , mxGetFieldByNumber ( rtdwData , 0 , 0 ) ) ; mr_BMSStateMachine_SetDWork ( & ( mdlrefDW -> rtdw . izgwu1no1t ) , mxGetFieldByNumber ( rtdwData , 0 , 1 ) ) ; mr_BMSSOCEstimation_SetDWork ( & ( mdlrefDW -> rtdw . j2vfortgzd ) , mxGetFieldByNumber ( rtdwData , 0 , 2 ) ) ; mr_BMSOut_SetDWork ( & ( mdlrefDW -> rtdw . banpsm2jq3 ) , mxGetFieldByNumber ( rtdwData , 0 , 3 ) ) ; mr_BMSBalancingLogic_SetDWork ( & ( mdlrefDW -> rtdw . lvxrgwkk43 ) , mxGetFieldByNumber ( rtdwData , 0 , 4 ) ) ; mr_BMSController_restoreDataFromMxArray ( ( void * ) & ( mdlrefDW -> rtdw . dz4c4vv4e1 ) , rtdwData , 0 , 5 , sizeof ( mdlrefDW -> rtdw . dz4c4vv4e1 ) ) ; mr_BMSController_restoreDataFromMxArray ( ( void * ) & ( mdlrefDW -> rtdw . phucyyn21j ) , rtdwData , 0 , 6 , sizeof ( mdlrefDW -> rtdw . phucyyn21j ) ) ; mr_BMSController_restoreDataFromMxArray ( ( void * ) & ( mdlrefDW -> rtdw . ku0cdxjs3l ) , rtdwData , 0 , 7 , sizeof ( mdlrefDW -> rtdw . ku0cdxjs3l ) ) ; mr_BMSController_restoreDataFromMxArray ( ( void * ) & ( mdlrefDW -> rtdw . iqzga4pj3l ) , rtdwData , 0 , 8 , sizeof ( mdlrefDW -> rtdw . iqzga4pj3l ) ) ; mr_BMSController_restoreDataFromMxArray ( ( void * ) & ( mdlrefDW -> rtdw . hdl0hgqmi0 ) , rtdwData , 0 , 9 , sizeof ( mdlrefDW -> rtdw . hdl0hgqmi0 ) ) ; mr_BMSController_restoreDataFromMxArray ( ( void * ) & ( mdlrefDW -> rtdw . hmm5af0r2l ) , rtdwData , 0 , 10 , sizeof ( mdlrefDW -> rtdw . hmm5af0r2l ) ) ; mr_BMSController_restoreDataFromMxArray ( ( void * ) & ( mdlrefDW -> rtdw . m3mj3jyjio ) , rtdwData , 0 , 11 , sizeof ( mdlrefDW -> rtdw . m3mj3jyjio ) ) ; mr_BMSController_restoreDataFromMxArray ( ( void * ) & ( mdlrefDW -> rtdw . kxvz5gfvp4 ) , rtdwData , 0 , 12 , sizeof ( mdlrefDW -> rtdw . kxvz5gfvp4 ) ) ; mr_BMSController_restoreDataFromMxArray ( ( void * ) & ( mdlrefDW -> rtdw . lizezojaqr ) , rtdwData , 0 , 13 , sizeof ( mdlrefDW -> rtdw . lizezojaqr ) ) ; mr_BMSController_restoreDataFromMxArray ( ( void * ) & ( mdlrefDW -> rtdw . ldt520oxg4 ) , rtdwData , 0 , 14 , sizeof ( mdlrefDW -> rtdw . ldt520oxg4 ) ) ; } } void mr_BMSController_RegisterSimStateChecksum ( SimStruct * S ) { const uint32_T chksum [ 4 ] = { 394638636U , 843596405U , 510129886U , 1067274651U , } ; slmrModelRefRegisterSimStateChecksum ( S , "BMSController" , & chksum [ 0 ] ) ; mr_BMSBalancingLogic_RegisterSimStateChecksum ( S ) ; mr_BMSCurrPowerLimCalc_RegisterSimStateChecksum ( S ) ; mr_BMSOut_RegisterSimStateChecksum ( S ) ; mr_BMSSOCEstimation_RegisterSimStateChecksum ( S ) ; mr_BMSStateMachine_RegisterSimStateChecksum ( S ) ; } mxArray * mr_BMSController_GetSimStateDisallowedBlocks ( ) { mxArray * data = NULL ; size_t numChildrenWithDisallowedBlocks = 0 ; size_t numBlocks = 0 ; mxArray * disallowedBlocksInChild [ 5 ] ; disallowedBlocksInChild [ 0 ] = mr_BMSBalancingLogic_GetSimStateDisallowedBlocks ( ) ; disallowedBlocksInChild [ 1 ] = mr_BMSCurrPowerLimCalc_GetSimStateDisallowedBlocks ( ) ; disallowedBlocksInChild [ 2 ] = mr_BMSOut_GetSimStateDisallowedBlocks ( ) ; disallowedBlocksInChild [ 3 ] = mr_BMSSOCEstimation_GetSimStateDisallowedBlocks ( ) ; disallowedBlocksInChild [ 4 ] = mr_BMSStateMachine_GetSimStateDisallowedBlocks ( ) ; { size_t i ; for ( i = 0 ; i < 5 ; ++ i ) { mxArray * data_i = disallowedBlocksInChild [ i ] ; if ( ( NULL ) != data_i ) { if ( 0 == numChildrenWithDisallowedBlocks ++ ) { data = data_i ; } numBlocks += mxGetM ( data_i ) ; } } } if ( numChildrenWithDisallowedBlocks > 1 ) { mwIndex subs [ 2 ] , offset ; data = mxCreateCellMatrix ( numBlocks , 3 ) ; subs [ 0 ] = 0 ; { size_t i ; for ( i = 0 ; i < 5 ; ++ i ) { mxArray * data_i = disallowedBlocksInChild [ i ] ; if ( ( NULL ) != data_i ) { mwIndex subs_i [ 2 ] , offset_i ; const mwIndex numRows_i = ( mwIndex ) mxGetM ( data_i ) ; for ( subs_i [ 0 ] = 0 ; subs_i [ 0 ] < numRows_i ; ++ ( subs_i [ 0 ] ) ) { mwIndex j ; for ( j = 0 ; j < 3 ; ++ j ) { mxArray * data_ij ; subs_i [ 1 ] = j ; offset_i = mxCalcSingleSubscript ( data_i , 2 , subs_i ) ; data_ij = mxGetCell ( data_i , offset_i ) ; data_ij = mxDuplicateArray ( data_ij ) ; subs [ 1 ] = j ; offset = mxCalcSingleSubscript ( data , 2 , subs ) ; mxSetCell ( data , offset , data_ij ) ; } ++ ( subs [ 0 ] ) ; } mxDestroyArray ( data_i ) ; } } } } return data ; }
#if defined(_MSC_VER)
#pragma warning(disable: 4505) //unreferenced local function has been removed
#endif
